# 0.1 Introduction to these tutorials 教程简介
## 欢迎！
欢迎学习 C++ 教程！最重要的是，这些教程旨在使学习 C++ 变得容易。

与许多其他网站和书籍不同，这些教程并不假定您之前有任何编程经验。随着您的进步，我们将教您所有需要了解的内容，并在此过程中提供 _大量_ 示例。

无论您是将学习 C++ 作为一种爱好还是为了专业发展，您都来对地方了！

来自特立尼达的读者 Syam 的感言：

这个网站解释 C++ 概念和教授编程的完美程度真是太疯狂了。我读了《编程：使用 C++ 的原则和实践》一书 [作者是 C++ 的创建者 Bjarne Stroustrup] TODO，它相当令人困惑......这个网站第一次就说得很清楚，他们解释了你需要知道的一切。不知何故，他们知道我不知道什么，以及我需要知道什么。这几乎就像我未来的自己回到了过去，教我会犯什么错误。
## 课程结构
本介绍性章节中的课程旨在为你提供有关 C++ 是什么、它是如何产生的、程序如何工作以及需要安装哪些软件来创建自己的程序的一些背景信息。您甚至会编写自己的第一个程序。
# 0.2 Introduction to programming languages 编程语言简介
现代计算机的速度非常快，并且还在不断提升。然而，计算机也有一些显著的限制：它们只能原生理解有限的指令集，并且必须被精确告知要执行什么任务。

**计算机程序**（通常也称为**应用程序**）是一组计算机可以执行以完成某些任务的指令。程序是使用**编程语言**编写的，编程语言是一种设计用来简化编写计算机指令的语言。

使用编程语言编写程序的过程称为**编程**。程序员通常通过创建源代码（通常简称为**代码**）来编写程序，源代码是一个或多个包含用编程语言编写的指令的文本文件。

当计算机被要求处理某个程序中的指令时，我们称计算机正在**运行**或**执行**该程序。程序实际上是在计算机的**硬件**上执行的（硬件是构成计算机的物理组件）。

典型计算设备上的重要硬件包括：

- **交互设备**（如显示器、触摸屏、键盘或鼠标），允许人与计算机交互。
- **存储设备**（如硬盘、SSD 或闪存），在计算机关机时仍然可以存储信息。
- **内存**，程序在执行之前会被加载到这里。
- **CPU**（中央处理器，通常称为计算机的“大脑”），实际上执行指令。

在现代计算中，程序往往不仅与硬件交互，还与系统上的其他软件（尤其是**操作系统**）交互。**平台**指的是一组兼容的硬件（如 CPU）和软件（如操作系统、浏览器等），它为软件应用程序提供运行的环境。例如，“PC” 通常用于指代运行 Windows 操作系统并使用 x86 系列 CPU 的平台。
## 机器语言
计算机的 CPU 无法理解 C++。相反，CPU 只能处理用**机器语言**（或机器码）编写的指令。某个 CPU 能理解的所有机器语言指令的集合称为**指令集**。

以下是一个机器语言指令的示例：`10110000 01100001`。

每个指令都会被 CPU 解释为一个执行非常具体任务的命令，例如“比较这两个数字”或“将这个数字复制到那个内存位置”。在计算机刚被发明时，程序员不得不直接使用机器语言编写程序，这是一项非常困难且耗时的工作。

这些指令的组织和解释超出了本教程的范围，但值得注意两点：

首先，每条指令由一系列 `1` 和 `0` 组成。每个 `0` 或 `1` 被称为**二进制位**（**bit**）。机器语言指令的位数各不相同——例如，一些 CPU 处理的指令始终为 **32 位**，而其他一些 CPU（如 x86 系列 CPU，可能你正在使用）则支持可变长度的指令。

其次，每个兼容的 CPU 系列（如 x86、Arm64）都有自己的机器语言，这些机器语言与其他 CPU 系列的机器语言不兼容。这意味着为某个 CPU 系列编写的机器语言程序无法在其他 CPU 系列上运行！

> [!info] **相关内容**
> 
> 一个“**CPU 系列**”正式称为“**指令集架构**”（**ISA**）。你可以在 [Wikipedia](https://en.wikipedia.org/wiki/Instruction_set_architecture) 上找到不同 CPU 系列的列表。
## 汇编语言
由于**机器语言**对人类来说难以阅读和理解，**汇编语言**应运而生。在汇编语言中，每条指令用一个简短的缩写来标识（而不是一组比特），并且可以使用名称和其他数字。

例如，以下是上述指令在 x86 汇编语言中的表示：`mov al, 061h`。

> [!info] 顺便一提……
> 
> `mov` 是一个汇编命令，它将一个值复制到某个位置。在这个例子中，值 `061h` 会被复制到`al`CPU 寄存器（寄存器是 CPU 内部的一种内存）。

这使得汇编语言比机器语言更容易阅读和编写。用汇编语言编写的程序通常速度非常快，在对速度有严格要求的情况下，汇编语言仍然在使用。

然而，由于 CPU 只能理解机器语言，汇编程序必须在执行前被转换为机器语言。这可以通过使用一个称为**汇编器**的程序完成，该程序将汇编程序作为输入，并输出可以运行的机器语言程序。

汇编语言和机器语言本质上有相同的缺点：

- **汇编程序难以理解**。尽管单个汇编指令易于理解，但推断出某段汇编代码实际在做什么却很难。而且，由于汇编程序即使做简单任务也需要许多指令，程序往往很长。
- **汇编程序不可移植**。每个 CPU 系列都有自己的汇编语言，设计时是为了将其汇编为同一 CPU 系列的机器语言。一个用汇编语言编写的程序很难汇编为适用于其他 CPU 系列的机器语言。
## 高级语言
为了应对机器语言和汇编语言的理解性和可移植性问题，出现了新的编程语言，例如 C、C++、Pascal（后来的 Java、JavaScript 和 Perl 等语言）。这些语言被称为**高级语言**。

例如，以上汇编指令在 C/C++ 中的等价代码是：`a = 97;`。

与汇编语言程序类似，用高级语言编写的程序也必须在执行之前被翻译成计算机可以理解的机器语言格式。这可以通过两种主要方式实现：**编译**和**解释**。

C++ 程序通常是**编译**的。**编译器**是一种程序（或一组程序），它读取源代码（通常用高级语言编写）并将其翻译成另一种语言（通常是低级语言，如机器语言或汇编语言，后者可以被汇编为机器语言）。这些机器语言文件通常会被组合成一个可执行文件（包含机器语言指令），可以运行或分发给其他人。值得注意的是，运行可执行文件不需要安装编译器。

在最初，编译器很原始，生成的汇编或机器代码运行较慢，优化不充分。然而，多年来，编译器已经非常擅长生成快速、优化的代码，在某些情况下，编译器生成的代码比人类用汇编编写的还要好。

以下是编译过程的简化表示：

![编译示例](https://www.learncpp.com/images/CppTutorial/Chapter0/Compiling-min.png?ezimgfmt=rs:521x161/rscb2/ngcb2/notWebP)

另一种方式是**解释**。**解释器**是一种直接执行源代码中指令的程序，不需要首先将其编译为可执行文件。解释器比编译器更灵活，但运行程序时效率较低，因为解释过程每次运行程序时都需要进行。这也意味着解释器必须安装在每台运行解释程序的机器上。

以下是解释过程的简化表示：

![解释示例](https://www.learncpp.com/images/CppTutorial/Chapter0/Interpreting-min.png?ezimgfmt=rs:721x61/rscb2/ngcb2/notWebP)

> [!info] 可选阅读
> 
> 你可以在[这里](https://stackoverflow.com/a/38491646)找到有关编译器与解释器优劣对比的详细讨论。
> 
> 另一个编译程序的优势是，分发一个编译程序不需要分发源代码。在非开源环境中，这对保护知识产权（IP）非常重要。

大多数语言既可以编译，也可以解释。传统上，高级语言如 C、C++ 和 Pascal 是编译的，而“脚本语言”如 Perl 和 JavaScript 通常是解释的。有些语言（如 Java）同时使用两者。我们将在稍后详细探讨 C++ 编译器。

高级语言有很多优点：
- **高级语言更容易阅读和编写**，因为其指令更接近我们日常使用的自然语言。这也使得它们更容易学习。
- **高级语言使用较少的指令即可完成与低级语言相同的任务**。在 C++ 中，你可以用一行代码 `a = b * 2 + 5;` 来完成操作。而在汇编语言中，这可能需要 5 到 6 条指令。这样，高级语言编写的程序更简洁且易于理解。
- **高级语言通常设计时考虑到了可移植性**。只要我们细心编写代码，我们就可以编写一个程序并将其编译，使其能够在多个平台上运行。一个**跨平台程序**是指设计可以在多个平台上运行的程序。

![跨平台示例](https://www.learncpp.com/images/CppTutorial/Chapter0/Portability-min.png?ezimgfmt=rs:481x261/rscb2/ng:webp/ngcb2)

> [!info]  面向高级读者
> 
> 以下是一些可能妨碍 C++ 代码可移植性的因素：
>
> - 许多操作系统（如 Microsoft Windows）提供了平台特定的功能，你可以在代码中使用这些功能。虽然这可能使为特定操作系统编写程序变得更容易，或提供与该操作系统的更深入集成，但这会损害代码的可移植性。
> - 许多第三方库仅在某些平台上可用。如果你使用其中的一个库，程序将仅限于该库支持的平台。
> - 某些编译器支持**编译器特定的扩展**，这些扩展是只有在该编译器中可用的功能。如果你使用这些扩展，其他不支持这些扩展的编译器将无法编译你的程序，除非进行修改。我们将在安装编译器后进一步讨论这些内容。
> - 在某些情况下，C++ 语言允许编译器决定某些行为的具体表现形式。我们将在[[Chapter 1 - C++ basics#1.6 Uninitialized variables and undefined behavior 未初始化变量和未定义行为|1.6 — 未初始化变量与未定义行为]]中进一步讨论“**实现定义行为**”。
>
> 如果你仅针对一个平台，则可移植性可能并不那么重要。然而，许多应用程序现在都针对多个平台，以扩大其覆盖范围。例如，一个移动应用程序可能希望同时支持 iOS 和 Android。
>
> 即使最初可移植性看起来没有用处，许多最初针对单一平台（如 PC）的应用程序，在取得一定成功和兴趣后，决定移植到其他平台（如 Mac 和各种游戏机）。如果一开始没有考虑可移植性，后期移植工作会更加困难。

在本教程中，我们将尽可能避免平台特定的代码，以确保我们的程序能够在任何有现代 C++ 编译器的平台上运行。
## 规则、最佳实践和警告
在这些教程中，我们将根据以下三类标记重要点：

> [!info] 规则
> 
>  规则是语言要求你必须遵守的指令。不遵守规则通常会导致程序无法正常运行。

> [!info] 面向高级读者
> 
> 这一部分内容主要面向本身具有一定 C++ 基础的读者。如果你是第一次接触编程 / C++这个语言，你可以选择性地跳过这一部分。当然，粗略的看一遍总不会错！

> [!note] 顺便说一句......
> 这里通常包含不是很重要的补充性说明内容

> [!quote] 作者注
> 这里面一般是一些作者想要告诉你的额外内容，值得你注意。

> [!quote] 可选阅读
> 额外的阅读内容。

> [!tip] 最佳实践
> 最佳实践是你应该遵循的方式，因为这种方式要么是惯用的（**idiomatic**），要么是被推荐的。也就是说，要么所有人都这么做（如果你不这么做，别人会觉得你的做法不符合预期），要么这种方式优于其他选择。

> [!example] 关键见解
> 这里一般是对上面一小节内容中关键点的简单回顾

> [!question] 章节最后的问题
> 在每一章最后可能会有一些习题来帮助你检查自己是否真正掌握本章内容，你可以先看问题，然后点击展开来查看标注答案。

> [!danger] 警告
> 警告是你不应该做的事情，因为它们通常会导致意外结果。

# 0.3 Introduction to C/C++ C/C++介绍
## 在 C++ 之前，先有 C
C 语言由 Dennis Ritchie 于 1972 年在贝尔电话实验室开发，主要作为一种**系统编程语言**（即用于编写操作系统的语言）。Ritchie 的主要目标是设计一种简洁的语言，易于编译，能够高效访问内存，生成高效代码，并且是自包含的（不依赖其他程序）。作为一种高级语言，C 旨在为程序员提供高度的控制权，同时允许开发者编写可以在不同平台上运行的程序。

C 语言因为其高效性和灵活性，在 1973 年，Ritchie 和 Ken Thompson 用 C 语言重写了大部分 Unix 操作系统。许多之前的操作系统是用汇编语言编写的。与只能在特定 CPU 上运行的汇编语言不同，C 语言具有出色的可移植性，使得 Unix 能够轻松地在不同类型的计算机上重新编译，从而加快了它的普及。C 语言和 Unix 系统的命运紧密相连，C 语言的流行部分得益于 Unix 作为操作系统的成功。

1978 年，Brian Kernighan 和 Dennis Ritchie 出版了一本书《The C Programming Language》（C 语言编程），这本书通常被称为 K&R（以作者姓氏首字母命名），为 C 语言提供了一个非正式规范，并成为事实上的标准。当需要最大可移植性时，程序员会遵循 K&R 的建议，因为当时大多数编译器是按照 K&R 标准实现的。

1983 年，美国国家标准学会（ANSI）成立了一个委员会，负责为 C 语言制定正式标准。1989 年（委员会的工作通常很慢），他们完成了标准，并发布了 C89 标准，通常称为 ANSI C。1990 年，国际标准化组织（ISO）采用了 ANSI C（做了一些小的修改）。这个版本的 C 被称为 C90。编译器最终变得符合 ANSI C/C90 标准，渴望最大可移植性的程序按照这个标准编写。

1999 年，ISO 委员会发布了一个新的 C 版本，非正式地称为 C99。C99 采用了许多已经作为扩展进入编译器或在 C++ 中实现的特性。
## C++
C++（读作“C 加加”）是由 Bjarne Stroustrup 在贝尔实验室开发的，作为 C 语言的扩展，始于 1979 年。C++ 为 C 语言添加了许多新特性，或许可以被视为 C 的超集，尽管这并不完全正确（因为 C99 引入了一些 C++ 中没有的特性）。C++ 相较于 C 最显著的创新在于它支持**面向对象编程**。至于“对象”是什么，它与传统编程方法有何不同，我们将在后续章节中讨论。

C++ 于 1998 年由 ISO 委员会标准化。这意味着 ISO 标准委员会批准了一份提供 C++ 语言正式描述的文档，称为**标准文档**。标准化的目标是帮助确保 C++ 代码在不同编译器和平台上行为一致。

语言的一个小更新于 2003 年发布，非正式地称为 C++03。

从那以后，C++ 语言进行了五次重大更新，分别是 C++11、C++14、C++17、C++20 和 C++23，每次都增加了新的功能。特别是 C++11 增加了大量新功能，被广泛认为是该语言的新基础版本。预计每三年左右语言将进行一次升级。

由于标准的正式名称很复杂（C++20 的正式名称是 ISO/IEC 14882:2020），标准通常以非正式名称来指代，其中包括发布年份的最后两位数字。例如，C++20 指的是 2020 年发布的 C++ 版本。
## C 和 C++ 的设计理念
C 和 C++ 的基本设计理念可以概括为“**信任程序员**”——这既令人惊叹又具有危险性。C++ 旨在赋予程序员极高的自由度去做他们想做的事。然而，这也意味着语言通常不会阻止你做一些看似不合理的事情，因为它假定你出于某种原因需要这么做。如果不加注意，新程序员很容易掉入一些陷阱。这也是为什么**知道不该在 C/C++ 中做什么几乎和知道该做什么一样重要**的主要原因之一。

> [!info] Q: C++ 擅长做什么？
> 
> C++ 在需要**高性能**和**对内存及其他资源的精确控制**的情况下表现出色。以下是一些通常用 C++ 编写的常见应用类型：
> 
> - 视频游戏
> - 实时系统（如交通运输、制造等）
> - 高性能金融应用（如高频交易）
> - 图形应用和模拟
> - 办公应用
> - 嵌入式软件
> - 音视频处理
> - 人工智能和神经网络

> [!info] Q: C++ 现在有多流行？
> 根据 [TIOBE 指数](https://www.tiobe.com/tiobe-index/)，截至 2024 年 8 月，C++ 是当前**第二受欢迎的编程语言**（仅次于 Python），并且总体呈上升趋势。
> 
> 随着每三年一次的语言更新，C++ 依然繁荣发展。

> [!info] Q: 我需要在学习这些教程之前了解 C 吗？
> 
> **不需要！** 直接学习 C++ 完全没有问题，我们会在此过程中教你所有需要的知识（包括要避免的陷阱）。
> 
> 一旦你掌握了 C++，如果有需要的话，学习标准 C 应该会相当容易。如今，C 主要用于一些**特定领域**的应用：如在嵌入式设备上运行的代码，或者当你需要与只能与 C 接口的其他语言交互时。对于大多数其他情况，C++ 是推荐的选择。

# 0.4 Introduction to C++ development
# 0.5 Introduction to the compiler, linker, and libraries
继续我们在上一节 [[#0.4 Introduction to C++ development| 0.4 — C++ 开发简介]] 中讨论的这个流程图：
![流程图](https://www.learncpp.com/images/CppTutorial/Chapter0/Development-min.png?ezimgfmt=ng%3Awebp%2Fngcb2%2Frs%3Adevice%2Frscb2-1)

让我们接着讨论步骤4到步骤7。
## 第 4 步：编译源代码
为了编译 C++ 源代码文件，我们使用**C++ 编译器**。编译器依次处理程序中的每个源代码文件（`.cpp`），并执行两个重要任务：

首先，编译器检查你的 C++ 代码是否符合 C++ 语言的规则。如果不符合，编译器会给出错误（并标注相应的行号），帮助你定位需要修正的地方。你必须得修改这些错误才能继续编译。

其次，编译器将你的 C++ 代码翻译成机器语言指令。这些指令存储在一个中间文件中，称为**目标文件**（object file）。目标文件还包含一些在后续步骤中需要或有用的元数据。

目标文件通常命名为 `name.o` 或 `name.obj`，其中 `name` 是生成目标文件的 `.cpp` 文件名。

例如，如果你的程序有 3 个 `.cpp` 文件，编译器将生成 3 个目标文件：
![目标文件](https://www.learncpp.com/images/CppTutorial/Chapter0/CompileSource-min.png?ezimgfmt=rs:421x161/rscb2/ngcb2/notWebP)

C++ 编译器可用于多种操作系统。我们将很快讨论如何安装编译器，因此现在不必进行此操作。
## 第 5 步：链接目标文件和库
编译器成功完成后，另一个程序称为**链接器**（linker）将开始工作。链接器的任务是将所有目标文件组合在一起，并生成所需的输出文件（通常是可执行文件）。这个过程称为**链接**。

首先，链接器会读取编译器生成的每个目标文件，并确保它们是有效的。

其次，链接器会确保所有跨文件的依赖项都被正确解析。例如，如果你在一个 `.cpp` 文件中定义了某些内容，并在另一个 `.cpp` 文件中使用它，链接器会将两者链接起来。如果链接器无法将引用与定义匹配，你将得到**链接错误**，并且链接过程将中止。

第三，链接器还可以链接**库文件**。**库文件**是预编译代码的集合，已经打包好以便在其他程序中重用。

C++ 附带了一个广泛的库，称为**C++ 标准库**（通常称为“标准库”），它提供了一组实用功能供你的程序使用。C++ 标准库中最常用的一部分是**输入/输出库**（通常称为 `iostream`），它包含用于在显示器上打印文本和从用户获取键盘输入的功能。几乎每个 C++ 程序都以某种形式使用了标准库，因此将标准库链接到程序中是非常常见的。大多数 C++ 链接器默认配置为将标准库链接到你的程序中，因此通常你不需要担心这个问题。

你还可以选择性地链接其他库。例如，如果你要编写一个播放声音的程序，你可能不想自己编写读取声音文件、检查其有效性，或搞清楚如何将声音数据传输到操作系统或硬件以通过扬声器播放的代码——那会很繁琐！相反，你可能会下载一个已经具备这些功能的库，并使用它。我们将在附录中讨论如何链接库（以及如何创建自己的库）。

![链接过程](https://www.learncpp.com/images/CppTutorial/Chapter0/LinkingObjects-min.png?ezimgfmt=rs:441x271/rscb2/ng:webp/ngcb2)

一旦链接器完成了所有目标文件和库的链接，那么（假设一切顺利）你将得到一个可以运行的**可执行文件**。
## 构建
由于涉及多个步骤，术语**构建**（**building**）通常用于指将源代码文件转换为可运行的可执行文件的完整过程。构建生成的特定可执行文件有时称为**构建成果**（**build**）。

> [!info] 面向高级读者
> 
> 对于复杂的项目，**自动化构建工具**（如 `make` 或 `build2`）通常用于帮助自动化程序的构建过程和运行自动化测试。虽然这些工具强大且灵活，但由于它们不是 C++ 核心语言的一部分，且你不需要使用它们来继续学习，我们不会在本教程系列中讨论它们。

## 第 6 和 7 步：测试和调试
这就是有趣的部分！你现在可以运行你的可执行文件，看看它的表现了！

一旦你可以运行程序，就可以进行**测试**。**测试**是评估软件是否按预期工作的过程。基本的测试通常涉及尝试不同的输入组合，以确保软件在不同情况下的正确行为。

如果程序没有按预期工作，那么你将需要进行**调试**，即寻找和修正编程错误的过程。

我们将在后续章节中更详细地讨论如何测试和调试你的程序。
## 集成开发环境（IDEs）
请注意，步骤 3、4、5 和 7 都涉及需要安装的软件程序（编辑器、编译器、链接器、调试器）。虽然你可以为每项活动使用单独的程序，但一个称为**集成开发环境**（**IDE**）的软件包将这些功能捆绑并集成在一起。我们将在下一节讨论 IDE 并安装一个。
# 0.6 Installing an Integrated Development Environment (IDE)
一个**集成开发环境（IDE）** 是一种软件，旨在方便开发、构建和调试你的程序。

典型的现代 IDE 包含以下功能：

- 一种便捷的方式来加载和保存代码文件。
- 编码编辑器，提供编程友好的功能，如行号、语法高亮、集成帮助、名称自动完成和自动源代码格式化。
- 一个基本的构建系统，允许你编译和链接程序生成可执行文件并运行它。
- 集成调试器，帮助你更容易找到和修复软件缺陷。
- 插件系统，允许你修改 IDE 或添加版本控制等功能。

一些 C++ IDE 会为你安装和配置 C++ 编译器和链接器，另一些则允许你插入自己选择的编译器和链接器（需要单独安装）。

尽管你可以分别做这些事情，但安装一个 IDE 并在单一界面中完成所有这些任务会更加方便。
## 选择一个 IDE
接下来的问题是，“该选哪个 IDE？”。许多 IDE 是免费的，你可以安装多个 IDE 来体验不同的开发环境。我们将在下面推荐几个我们最喜欢的 IDE。

如果你有其他想法，也没问题。本教程中展示的概念通常适用于任何现代的 IDE。不过，不同的 IDE 可能使用不同的名称、布局和按键映射，因此你可能需要在你的 IDE 中查找对应的功能。

> [!tip] **提示**
> 为了从本教程中获得最大价值，我们建议安装一个支持至少 C++17 的 IDE。
> 
> 如果你因教育或业务限制只能使用支持 C++14 的编译器，本教程中的许多课程和示例仍然适用。不过，如果遇到使用 C++17（或更新版本）功能的课程，而你使用的编译器不支持这些功能，你可能需要跳过或转换这些课程，这可能并不容易。
> 
> 你不应使用任何连C++11都不支持的编译器（通常被视为现代 C++ 的最低标准）。
> 
> 我们建议安装最新版本的编译器。如果你不能使用最新版本，以下是支持 C++17 的最低编译器版本：
> 
> - **GCC/G++ 7**
> - **Clang++ 8**
> - **Visual Studio 2017 15.7**
### Visual Studio（适用于 Windows）
如果你在 Windows 10 或 11 上开发，我们强烈推荐下载 **Visual Studio 2022 Community** 版。

运行安装程序后，你会看到一个选择workloads的界面。请选择 **桌面开发（C++）**。如果不选择此项，则不会提供 C++ 的相关功能。

右侧默认选择的选项应该可以，但请确保选择了 **Windows 11 SDK**（如果只有 Windows 10 SDK 可用，也可以选择它）。使用 Windows 11 SDK 开发的应用程序可以在 Windows 10 上运行。
![Visual Studio安装界面](https://www.learncpp.com/images/CppTutorial/Chapter0/VS2019-Installer-min.png?ezimgfmt=rs:1130x631/rscb2/ng:webp/ngcb2)

如果磁盘空间或下载大小有限制，Microsoft 仍提供 **Visual Studio Express 2017 for Windows Desktop**，你可以在页面底部找到它。不过，Microsoft 已不再支持这个产品，并且它不包含许多新的 C++ 语言功能，因此我们只建议无法安装 Visual Studio Community 版的用户使用。
### Code::Blocks（适用于 Linux 或 Windows）
如果你在 Linux 上开发（或你在 Windows 上开发但希望编写可以轻松移植到 Linux 的程序），我们推荐 **Code::Blocks**。它是一个免费的开源跨平台 IDE，可以在 Linux 和 Windows 上运行。

> [!example] Windows 用户  
> 
> 请确保下载带有 MinGW 的 Code::Blocks 版本（文件名应以 `mingw-setup.exe` 结尾）。这将安装 MinGW，其中包含Windows 版本的 GCC C++ 编译器。
![Code::Blocks下载界面](https://www.learncpp.com/blog/wp-content/uploads/images/CppTutorial/ide/CB-MinGWDownload-min.png?ezimgfmt=rs:600x425/rscb2/ng:webp/ngcb2)
> 
> Code::Blocks 20.03 自带的 MinGW 版本过时，仅支持 C++17（目前比最新版本的 C++ 低一个版本）。如果你想使用最新版本的 C++（C++20），你需要更新 MinGW。更新步骤如下：
> 
> 1. 按上述方式安装 Code::Blocks。
> 2. 如果 Code::Blocks 已打开，请关闭它。
> 3. 打开 Windows 文件资源管理器（快捷键 `Win + E`）。
> 4. 导航到你的 Code::Blocks 安装目录（可能是 `C:\Program Files (x86)\CodeBlocks`）。
> 5. 将 `MinGW` 目录重命名为 `MinGW.bak`（以防出现问题）。
> 6. 打开浏览器并访问 [winlibs.com](https://winlibs.com/)。
> 7. 下载更新的 MinGW-w64 版本。你可能需要选择 **Release Versions -> UCRT Runtime -> LATEST -> Win64 -> without LLVM/Clang/LLD/LLDB -> Zip archive**。
> 8. 将 `mingw64` 文件夹解压缩到你的 Code::Blocks 安装目录。
> 9. 将 `mingw64` 重命名为 `MinGW`。
> 10. 确认更新后的编译器可以正常工作后，你可以删除旧文件夹（`MinGW.bak`）。

> [!example] Linux 用户
> 
> 某些 Linux 安装可能缺少运行或编译 Code::Blocks 程序所需的依赖项。
> 
> Debian 系的 Linux 用户（例如 Mint 或 Ubuntu）可能需要安装 `build-essential` 包。可以通过终端命令行输入 `sudo apt-get install build-essential` 来安装。
> 
> Arch Linux 用户可能需要安装 `base-devel` 包。
> 
> 其他 Linux 发行版的用户需要确定自己的包管理器和相应的软件包。

首次启动 Code::Blocks 时，你可能会看到**编译器自动检测对话框**。如果是这样，请确保 `GNU GCC Compiler` 设置为默认编译器，然后点击 **确定**。
![Code::Blocks首次界面](https://www.learncpp.com/images/CppTutorial/Chapter0/CompilersAutoDetection-min.png?ezimgfmt=rs:587x404/rscb2/ng:webp/ngcb2)

> [!info] 如果我遇到“在 GNU GCC 编译器的配置搜索路径中找不到编译器可执行文件”错误，该怎么办？
> 请尝试一下操作
> 
> 1. 如果您使用的是 Windows，请确保您已下载带有 MinGW 的 Code：：Blocks 版本。它是名称中带有 “mingw” 的那个。
> 2. 尝试转到 settings、compiler，然后选择 “reset to defaults”。
> 3. 尝试转到设置、编译器、工具链可执行文件选项卡，并确保“编译器的安装目录”设置为 MinGW 目录（例如 C:\\Program Files(x86)\\CodeBlocks\\MinGW）。
> 4. 尝试执行完全卸载，然后重新安装。
> 5. [尝试其他编译器.](http://wiki.codeblocks.org/index.php/Installing_a_supported_compiler)

### Visual Studio Code（适用于有经验的 Linux、macOS 或 Windows 用户）
**Visual Studio Code**（简称 “VS Code”，不要与类似名称的 Visual Studio Community 混淆）是一个代码编辑器，因其快速、灵活、开源，且支持多种编程语言，适合许多平台，是有经验的开发者的热门选择。

缺点是，**VS Code 配置比其他 IDE 更困难**（在 Windows 上尤其难安装）。在继续操作之前，我们建议先阅读下面的安装和配置文档，确保你了解并熟悉其中的步骤。
> [!danger] **警告**  
> 
> 本教程系列没有完整的 VS Code 安装指南。
> 
> **VS Code 不适合 C++ 初学者**，并且读者曾报告在安装和配置 C++ 时遇到各种问题。
> 
> 除非你已经熟悉 VS Code 或具有解决配置问题的经验，否则我们不建议选择此选项。

感谢用户 glibg10b 在多篇文章中提供 VS Code 说明的简要文章：

> [!example] 对于 Linux 用户
> 
> 
> VS Code 应使用发行版的包管理器下载。[适用于 Linux 的 VS Code](https://code.visualstudio.com/docs/setup/linux) 说明介绍了如何对各种 Linux 发行版执行此操作。
> 
> 安装 VS Code 后，请按照[有关如何为 Linux 配置 C++ 的说明](https://code.visualstudio.com/docs/cpp/config-linux)进行操作。

> [!example] 对于 Mac 用户
> 
> [适用于 Mac 的 VS Code 说明](https://code.visualstudio.com/docs/setup/mac)详细介绍了如何安装和设置适用于 macOS 的 VS Code。
> 
> 安装 VS Code 后，请按照[有关如何为 Mac 配置 C++ 的说明](https://code.visualstudio.com/docs/cpp/config-clang-mac)进行操作。

> [!example] 对于 Windows 用户
> 
> [适用于 Windows 的 VS Code 说明](https://code.visualstudio.com/docs/setup/windows)详细介绍了如何安装和设置适用于 Windows 的 VS Code。
> 
> 安装 VS Code 后，请按照[有关如何为 Windows 配置 C++ 的说明](https://code.visualstudio.com/docs/cpp/config-mingw)进行操作。

## 其他 macOS 平台 IDE
其他流行的 Mac 选项包括 [Xcode](https://developer.apple.com/xcode/)（如果可用）和 [Eclipse](https://www.eclipse.org/) 代码编辑器。Eclipse 默认未设置为使用 C++，您需要安装可选的 C++ 组件。

虽然 Visual Studio for Mac 已经发布，但它不支持 C++，Microsoft 已经宣布他们将停用该产品。
## 其他编译器或平台

> [!info] 我可以使用基于 Web 的编译器吗？
> 
> 是的，至少对于部分功能可以。当您的 IDE 正在下载时（或者如果您不确定是否要安装一个），您可以使用基于 Web 的编译器继续本教程。我们建议使用以下方法之一：
> 
> - [TutorialsPoint](https://www.tutorialspoint.com/compile_cpp_online.php)
> - [Wandbox](https://wandbox.org/) (可以选择不同版本的 GCC 或 Clang)
> - [Godbolt](https://godbolt.org/)（可以看到相应的汇编代码）
> 
> 基于 Web 的编译器非常适合初次使用和简单的练习。但是，它们的功能通常非常有限 —— 许多不允许您创建多个文件或有效地调试程序，并且大多数不支持交互式输入。如果可以，您还是需要迁移到完整的 IDE。

> [!info] 我可以使用命令行编译器（例如 Linux 上的 g++）吗？
> 
> 是的，但我们不建议初学者使用它。您需要找到自己的编辑器，并查找如何使用它。学习使用命令行调试器并不像集成调试器那么容易，并且会使调试程序更加困难。

> [!info] 我是否可以使用其他代码编辑器或 IDE，例如 Eclipse、Sublime 或 Notepad++？
>
> 是的，但我们不建议初学者使用它们。有许多出色的代码编辑器和 IDE，可以配置为支持多种语言，并允许您混合和匹配插件以根据需要自定义您的体验。但是，其中许多编辑器和 IDE 需要额外的配置才能编译 C++ 程序，并且在此过程中可能会出错。对于初学者，我们建议使用开箱即用的方法，这样您就可以花更多时间学习编码，而不是花更少的时间尝试找出代码编辑器无法与编译器或调试器一起正常工作的原因。

## 要避免的 IDE
您应该完全避免使用以下 IDE，因为它们不支持 C++11 及以上标准，根本不支持 C++，或者不再积极支持或维护：

- Borland Turbo C++ -- 不支持 C++11
- Visual Studio for Mac -- 不支持 C++
- Dev C++ -- 未主动支持

当存在支持现代 C++ 的轻量级免费替代方案时，没有理由使用过时或不受支持的编译器。
## 当事情出错时（也称为 IDE 代表“I don't even...”）
IDE 安装可能会导致相当多的问题。安装可能会直接失败（或者安装可能成功，但由于配置问题，当您尝试使用 IDE 时，IDE 将出现问题）。如果您遇到此类问题，请尝试卸载 IDE（假设它首先已安装），重新启动计算机，暂时禁用防病毒或反恶意软件，然后再次尝试安装。

如果此时仍遇到问题，则有两个选项。更简单的选择是尝试不同的 IDE。另一种选择是解决问题。遗憾的是，安装和配置错误的原因多种多样，并且特定于 IDE 软件本身，我们无法就如何解决此类问题提供有效的建议。在这种情况下，我们建议您将您遇到的错误消息或问题复制到您最喜欢的搜索引擎（例如 Google 或 Duck Duck Go）中，并尝试在其他地方找到一些不可避免地遇到相同问题的可怜人的论坛帖子。通常会有关于您可以尝试解决问题的建议。
## 继续
如果你成功安装 IDE ，或者如果您暂时继续使用基于 Web 的编译器，您就可以开始编写您的第一个程序了！
# 0.7 Compiling your first program
### 0.7 — 编译你的第一个程序

在我们开始编写第一个程序之前，我们需要学习如何在我们的集成开发环境（IDE）中创建新的程序。在本节中，我们将介绍如何做到这一点，并且你将编译并运行你的第一个程序！

#### 项目

要在 IDE 中编写 C++ 程序，通常需要从创建一个**新项目**开始（稍后我们会演示如何操作）。项目是一个容器，包含所有的源代码文件、图像、数据文件等，这些文件和数据是生成可运行的可执行文件（或库、网站等）所必需的。项目还保存各种 IDE、编译器和链接器设置，并记住你离开的状态，这样当你稍后重新打开项目时，IDE 的状态可以恢复到你离开的地方。当你选择编译程序时，项目中的所有 `.cpp` 文件将被编译和链接。

每个项目对应一个程序。当你准备创建第二个程序时，你需要创建一个新项目，或者覆盖现有项目中的代码（如果你不想保留它的话）。项目文件通常是 IDE 专有的，因此在一个 IDE 中创建的项目需要在另一个 IDE 中重新创建。

**最佳实践**  
每次编写新程序时都创建一个新项目。

#### 控制台项目

创建新项目时，通常会询问你要创建哪种项目。本教程中我们创建的所有项目都是**控制台项目**。控制台项目意味着我们将创建可以从 Windows、Linux 或 Mac 控制台运行的程序。

默认情况下，控制台应用程序没有图形用户界面（GUI），它们向控制台打印文本，从键盘读取输入，并编译为独立的可执行文件。对于学习 C++ 来说，这是理想的选择，因为它将复杂性降到最低，并确保程序在各种系统上都能正常运行。

#### 工作区 / 解决方案

当你为程序创建新项目时，许多 IDE 会自动将你的项目添加到一个“工作区”或“解决方案”中（具体名称因 IDE 而异）。工作区或解决方案是一个容器，可以包含一个或多个相关项目。

尽管你可以将多个项目添加到一个解决方案中，但我们一般建议为每个程序创建一个新的工作区或解决方案，尤其是在学习阶段。这更简单，也减少了出错的可能性。

#### 编写你的第一个程序

传统上，程序员在学习新语言时通常会先编写一个著名的“Hello, world!”程序。我们也不打算剥夺你这一体验。

#### 在 Visual Studio 2019（或更新版本）中创建项目

打开 Visual Studio 2019（或更新版本）时，你应该会看到如下对话框：

选择**创建新项目**，然后选择**Windows 桌面向导**并点击**下一步**。确保选择**控制台应用程序（.exe）**，并取消选择**预编译头**。项目名称设为**HelloWorld**，并点击**创建**。

此时，你已经创建了一个项目！现在，在 Visual Studio 的 Solution Explorer 窗口中，可以看到**HelloWorld.cpp** 文件。在文本编辑器中删除已有代码，输入或复制以下代码：

```cpp
#include <iostream>

int main()
{
    std::cout << "Hello, world!";
    return 0;
}
```

按 `F7` 或者选择**构建解决方案**来编译你的程序。如果编译成功，按 `Ctrl-F5` 运行程序，你将会看到控制台输出：

```
Hello, world!
```

#### 在 Code::Blocks 中创建项目

在 Code::Blocks 中，选择**文件 > 新建 > 项目**，并选择**控制台应用程序**。为项目命名为**HelloWorld**，然后在 `main.cpp` 中输入以下代码：

```cpp
#include <iostream>

int main()
{
    std::cout << "Hello, world!";
    return 0;
}
```

按 `Ctrl-F9` 编译并运行项目。

#### 使用 g++ 编译器

如果你使用 `g++` 命令行编译器，你可以在文本文件中输入以下代码，并保存为 `HelloWorld.cpp`：

```cpp
#include <iostream>

int main()
{
    std::cout << "Hello, world!";
    return 0;
}
```

在命令行中输入：

```bash
g++ -o HelloWorld HelloWorld.cpp
```

这将编译并链接 `HelloWorld.cpp`。然后输入：

```bash
./HelloWorld
```

你将会看到输出 `Hello, world!`。

#### 结论

恭喜你，你已经通过了这段教程中最困难的部分——安装 IDE 并编译第一个程序！不要担心如果你还不理解代码中的不同行的作用，我们将在接下来的章节中详细解释每一行代码的含义。
# 0.8 A few common C++ problems
### 0.8 — 常见的 C++ 问题

在这一节中，我们将解决一些新手程序员经常遇到的常见问题。这不是编译或执行问题的全面列表，而是一些实用的解决方案。如果你有其他问题的建议，可以在评论区提出。

#### 常见运行时问题

**Q: 执行程序时，控制台窗口一闪而过然后立即关闭。**

首先，确保在程序顶部添加以下几行代码（Visual Studio 用户，确保这些行位于 `#include “pch.h”` 或 `#include “stdafx.h”` 之后，如果存在的话）：

```cpp
#include <iostream>
#include <limits>
```

其次，在 `main()` 函数的末尾（在 `return` 语句之前）添加以下代码：

```cpp
std::cin.clear(); // 重置任何错误标志
std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n'); // 忽略输入缓冲区中的所有字符，直到找到回车符
std::cin.get(); // 获取用户输入的一个字符
```

这样可以让程序在继续前等待用户按键，从而有时间检查程序输出。

**Q: 我运行了我的程序，窗口弹出但没有输出。**

你的杀毒软件或反恶意软件可能阻止了程序的执行。尝试临时禁用它，看看问题是否解决。

**Q: 我的程序编译通过了，但运行时却不正确。我该怎么办？**

调试它！我们将在第 3 章提供有关如何诊断和调试程序的提示。

#### 常见编译时问题

**Q: 编译程序时，出现关于未解析的外部符号 _main 或 _WinMain@16 的错误。**

这意味着编译器找不到你的 `main()` 函数。所有程序都必须包含一个 `main()` 函数。检查以下几点：

- 你的代码中是否有一个名为 `main()` 的函数？
- `main` 是否拼写正确？
- 编译时，包含 `main()` 函数的文件是否被编译？如果没有，移动 `main()` 函数到已编译的文件中，或将该文件添加到项目中。

**Q: 编译时，我收到关于 `main` 已经定义或 `main` 的多重定义错误。**

C++ 程序只能有一个 `main()` 函数。检查项目中的所有文件，删除除一个 `main()` 之外的所有 `main()` 函数。

**Q: 我尝试使用 C++11/14/17/XX 的功能，但不起作用。**

如果你的编译器较旧，它可能不支持这些语言的新增特性。在这种情况下，升级你的编译器。

**Q: 在使用 `cin`、`cout` 或 `endl` 时，编译器提示未声明的标识符。**

首先，确保你在文件顶部添加了以下代码：

```cpp
#include <iostream>
```

其次，确保 `cin`、`cout` 和 `endl` 前加上 `std::` 前缀：

```cpp
std::cout << "Hello, world!" << std::endl;
```

**Q: 编译程序时，我收到“文件末尾无换行符”错误。**

C++ 标准要求所有源文件（`.cpp` 文件）必须以换行符结尾。在源文件末尾按回车键，然后保存并重新编译。

#### Visual Studio 特定问题

**Q: 使用 Microsoft Visual C++ 编译时，出现 C1010 致命错误，提示找不到预编译头。**

该错误表示 Microsoft Visual C++ 编译器设置为使用预编译头，但某些代码文件没有 `#include "pch.h"` 或 `#include "stdafx.h"` 作为代码文件的第一行。建议关闭预编译头，或者在文件顶部添加 `#include "pch.h"`。

**Q: Visual Studio 显示类似 "unresolved external symbol _WinMain@16" 的错误。**

你可能创建了一个 Windows 图形应用程序，而不是控制台应用程序。重新创建项目，确保将其设为 Windows 控制台项目。

**Q: 编译时出现 "Cannot find or open the PDB file" 的警告。**

这只是一个警告，不会影响程序的运行。要修复它，进入**调试菜单 > 选项和设置 > 符号**，勾选“Microsoft Symbol Server”。

#### 其他问题

**Q: 我遇到了其他问题，如何快速得到答案？**

首先，尝试使用搜索引擎。输入问题的关键字，特别是错误消息，用引号引起来。如果搜索无效，可以向编程问答网站（如 Stack Overflow）提出问题。


# 0.9 Configuring your compiler: Build configurations
# 0.10 Configuring your compiler: Compiler extensions
# 0.11 Configuring your compiler: Warning and error levels
# 0.12 Configuring your compiler: Choosing a language standard
# 0.13 What language standard is my compiler using?